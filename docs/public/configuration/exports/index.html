<!DOCTYPE html>
<html
  lang="en-US"
  dir="ltr"
><head><script src="/etlx/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=etlx/livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000000">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="/favicon.ico"><link rel="preload" href="/icons/clipboard.svg" as="image" type="image/svg+xml" />
<link rel="preload" href="/icons/caret-down.svg" as="image" type="image/svg+xml" />
<link rel="preload" href="/icons/caret-right.svg" as="image" type="image/svg+xml" />
<link rel="preload" href="/icons/home.svg" as="image" type="image/svg+xml" />
<title>Exports | ETLX</title>
  <meta name="description" content="The Plume Hugo documentation theme">
  <meta name="keywords" content="Plume, Hugo, documentation, theme">
  <meta name="author" content="Real Data-Driven">
  <meta name="language" content="en-US">

  <link rel="canonical" href="http://localhost:1313/etlx/configuration/exports/">
  <link rel="manifest" href="http://localhost:1313/etlx/manifest.webmanifest"><meta property="og:title" content="Exports | ETLX">
  <meta property="og:description" content="The Plume Hugo documentation theme">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://localhost:1313/etlx/configuration/exports/">
  <meta property="og:locale" content="en-US">
  <meta property="og:site_name" content="ETLX">
  <meta property="og:image" content="http://localhost:1313/favicon.ico">
  <meta property="og:image:width" content="512">
  <meta property="og:image:height" content="512">
  <meta property="og:image:alt" content="ETLX logo"><meta property="article:author" content="Real Data-Driven"><meta property="article:section" content="configuration"><meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Exports | ETLX">
  <meta name="twitter:description" content="The Plume Hugo documentation theme">
  <meta name="twitter:image" content="http://localhost:1313/favicon.ico">
  <meta name="twitter:image:alt" content="ETLX logo"><script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "TechArticle",
        "@id": "http:\/\/localhost:1313\/etlx\/configuration\/exports\/#article",
        "headline": "Exports",
        "description": "The Plume Hugo documentation theme",
        "url": "http:\/\/localhost:1313\/etlx\/configuration\/exports\/",
        "datePublished": "0001-01-01T00:00:00Z",
        "dateModified": "0001-01-01T00:00:00Z",
        "wordCount":  825 ,
        "timeRequired": "PT4M",
        "author": {
          "@type": "Organization",
          "@id": "http:\/\/localhost:1313\/etlx\/#organization"
        },
        "publisher": {
          "@type": "Organization",
          "@id": "http:\/\/localhost:1313\/etlx\/#organization"
        },
        "isPartOf": {
          "@id": "http:\/\/localhost:1313\/etlx\/#website"
        }
      },{
        "@type": "BreadcrumbList",
        "@id": "http:\/\/localhost:1313\/etlx\/configuration\/exports\/#breadcrumb",
        "itemListElement": [{
              "@type": "ListItem",
              "position":  1 ,
              "name": "Plume Documentation Theme",
              "item": "http:\/\/localhost:1313\/etlx\/"
            },{
              "@type": "ListItem",
              "position":  2 ,
              "name": "Configuration",
              "item": "http:\/\/localhost:1313\/etlx\/configuration\/"
            },{
              "@type": "ListItem",
              "position":  3 ,
              "name": "Exports",
              "item": "http:\/\/localhost:1313\/etlx\/configuration\/exports\/"
            }]
      },{
        "@type": "WebSite",
        "@id": "http:\/\/localhost:1313\/etlx\/#website",
        "url": "http:\/\/localhost:1313\/etlx\/",
        "name": "ETLX",
        "publisher": {
          "@id": "http:\/\/localhost:1313\/etlx\/#organization"
        }
      }
    ]
  }
</script>
<link rel="stylesheet" href="/etlx/css/_reset.css"><link rel="stylesheet" href="/etlx/css/base.css"><link rel="stylesheet" href="/etlx/css/breadcrumbs.css"><link rel="stylesheet" href="/etlx/css/card.css"><link rel="stylesheet" href="/etlx/css/content.css"><link rel="stylesheet" href="/etlx/css/edit-link.css"><link rel="stylesheet" href="/etlx/css/fonts.css"><link rel="stylesheet" href="/etlx/css/footer.css"><link rel="stylesheet" href="/etlx/css/form.css"><link rel="stylesheet" href="/etlx/css/header.css"><link rel="stylesheet" href="/etlx/css/headings.css"><link rel="stylesheet" href="/etlx/css/highlight-copy.css"><link rel="stylesheet" href="/etlx/css/highlight.css"><link rel="stylesheet" href="/etlx/css/page.css"><link rel="stylesheet" href="/etlx/css/search.css"><link rel="stylesheet" href="/etlx/css/sidebar.css"><link rel="stylesheet" href="/etlx/css/skip-link.css"><link rel="stylesheet" href="/etlx/css/table.css"><link rel="stylesheet" href="/etlx/css/toc.css"><link rel="stylesheet" href="/etlx/css/variables.css"></head>
<body
    class="has-toc has-sidebar"
  ><a class="skip-link" href="#main-content">Skip to main content</a>
<header class="header"><button
      class="header__sidebar--toggle"
      data-action="toggle-sidebar"
      title="Toggle sidebar"
    ></button><a class="header__title" href="/">ETLX</a><nav class="menu">
    <ul><li>
      <a href="/etlx/">Home</a></li><li>
      <a href="/etlx/docs/">Documentation</a></li><li>
      <a href="/etlx/introduction/">Introduction</a></li><li>
      <a href="/etlx/quick-start/">Quick Start</a></li><li>
      <a href="/etlx/configuration/">Configuration</a></li><li>
      <a href="/etlx/advanced/">Advanced</a></li><li>
      <a href="/etlx/embedding/">Embedding</a></li><li>
      <a href="/etlx/future/">Future</a></li><li>
      <a href="/etlx/license/">License</a></li></ul>
  </nav><button
    class="header__menu--toggle"
    data-action="toggle-menu"
    title="Toggle menu"
  ></button>
</header>
<div class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList"><a
          class="crumb home"
          href="http://localhost:1313/etlx/"
          title="Plume Documentation Theme"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        ><meta itemprop="item" content="http://localhost:1313/etlx/"><span itemprop="name">Plume Documentation Theme</span><meta itemprop="position" content="1"></a><a
          class="crumb"
          href="http://localhost:1313/etlx/configuration/"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        ><meta itemprop="item" content="http://localhost:1313/etlx/configuration/"><span itemprop="name">Configuration</span><meta itemprop="position" content="2"></a><span
          class="crumb current"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        ><meta itemprop="item" content="http://localhost:1313/etlx/configuration/exports/"><span itemprop="name">Exports</span><meta itemprop="position" content="3"></span></div><aside class="sidebar">
    <div class="sidebar__content">
      <button
        class="sidebar__close"
        data-action="toggle-sidebar"
        title="Close sidebar"
      ></button>

      <div class="sidebar__section--search">
        <input
          name="q"
          placeholder="Search..."
          type="search"
        />
        <ul class="sidebar__section--search-results"></ul>
      </div>

      <nav class="sidebar__nav">
        <ul class="sidebar__section--pages"><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/etl/"
      >ETL</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/validation/"
      >Validation Rules</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/query-doc/"
      >Query Documentation</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/data-quality/"
      >Data Quality</a>
    </li><li>
      <a
        class="sidebar__link is-active"
        href="http://localhost:1313/etlx/configuration/exports/"
      >Exports</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/scripts/"
      >Scripts</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/multi-queries/"
      >Multi-Queries</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/logs/"
      >Logs</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/requires/"
      >Loading Config Dependencies</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/actions/"
      >Actions</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/notify/"
      >Notify</a>
    </li></ul>
      </nav>
    </div><footer class="footer">
    <div class="footer__social-links"><a href="https://github.com/realdatadriven/etlx" target="_blank" rel="noopener noreferrer"><div title="GitHub">
              <div aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M5.315 2.1c.791-.113 1.9.145 3.333.966l.272.161l.16.1l.397-.083a13.3 13.3 0 0 1 4.59-.08l.456.08l.396.083l.161-.1c1.385-.84 2.487-1.17 3.322-1.148l.164.008l.147.017l.076.014l.05.011l.144.047a1 1 0 0 1 .53.514a5.2 5.2 0 0 1 .397 2.91l-.047.267l-.046.196l.123.163c.574.795.93 1.728 1.03 2.707l.023.295L21 9.5c0 3.855-1.659 5.883-4.644 6.68l-.245.061l-.132.029l.014.161l.008.157l.004.365l-.002.213L16 21a1 1 0 0 1-.883.993L15 22H9a1 1 0 0 1-.993-.883L8 21v-.734c-1.818.26-3.03-.424-4.11-1.878l-.535-.766c-.28-.396-.455-.579-.589-.644l-.048-.019a1 1 0 0 1 .564-1.918c.642.188 1.074.568 1.57 1.239l.538.769c.76 1.079 1.36 1.459 2.609 1.191L8 17.562l-.018-.168a5 5 0 0 1-.021-.824l.017-.185l.019-.12l-.108-.024c-2.976-.71-4.703-2.573-4.875-6.139l-.01-.31L3 9.5a5.6 5.6 0 0 1 .908-3.051l.152-.222l.122-.163l-.045-.196a5.2 5.2 0 0 1 .145-2.642l.1-.282l.106-.253a1 1 0 0 1 .529-.514l.144-.047z"/></svg>
</div>
            </div></a></div>
  </footer></aside>

  <div class="sidebar__backdrop" data-action="toggle-sidebar"></div><main id="main-content"><h1>Exports</h1><h3 id="exports">Exports</h3>
<p>The <code>EXPORTS</code> section in the ETL configuration handles exporting data to files. This is particularly useful for generating reports for internal departments, regulators, partners, or saving processed data to a data lake. By leveraging DuckDB&rsquo;s ability to export data in various formats, this section supports file generation with flexibility and precision.</p>
<hr>
<h2 id="sales-data-export">Sales Data Export</h2>
<figure class="code-block" role="figure" aria-label="yaml code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">DailyExports</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Daily file exports for various datasets.&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">database</span><span class="p">:</span><span class="w"> </span><span class="l">reporting_db</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;duckdb:&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/path/to/Reports/YYYYMMDD&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<figure class="code-block" role="figure" aria-label="sql code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- export
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">COPY</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="s2">&#34;DB&#34;</span><span class="p">.</span><span class="s2">&#34;Sales&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="s2">&#34;sale_date&#34;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;{YYYY-MM-DD}&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;/path/to/Reports/YYYYMMDD/sales_YYYYMMDD.csv&#39;</span><span class="w"> </span><span class="p">(</span><span class="n">FORMAT</span><span class="w"> </span><span class="s1">&#39;csv&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">HEADER</span><span class="w"> </span><span class="k">true</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<h2 id="region-data-export-to-excel">Region Data Export to Excel</h2>
<figure class="code-block" role="figure" aria-label="yaml code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">RegionExport</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Export region data to an Excel file.&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;duckdb:&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">export_sql</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;LOAD sqlite&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;LOAD excel&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;ATTACH &#39;reporting.db&#39; AS DB (TYPE SQLITE)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">export</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;DETACH DB&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<figure class="code-block" role="figure" aria-label="sql code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- export
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">COPY</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="s2">&#34;DB&#34;</span><span class="p">.</span><span class="s2">&#34;Regions&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="s2">&#34;updated_at&#34;</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;{YYYY-MM-DD}&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="s1">&#39;/path/to/Reports/YYYYMMDD/regions_YYYYMMDD.xlsx&#39;</span><span class="w"> </span><span class="p">(</span><span class="n">FORMAT</span><span class="w"> </span><span class="n">XLSX</span><span class="p">,</span><span class="w"> </span><span class="n">HEADER</span><span class="w"> </span><span class="k">TRUE</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<h2 id="sales-report-template">Sales Report Template</h2>
<figure class="code-block" role="figure" aria-label="yaml code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">SalesReport</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Generate a sales report from a template.&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;duckdb:&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">before_sql</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;LOAD sqlite&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;ATTACH &#39;reporting.db&#39; AS DB (TYPE SQLITE)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/path/to/Templates/sales_template.xlsx&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/path/to/Reports/sales_report_YYYYMMDD.xlsx&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">mapping</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">sheet</span><span class="p">:</span><span class="w"> </span><span class="l">Summary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">range</span><span class="p">:</span><span class="w"> </span><span class="l">B2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="l">summary_query</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">range</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l">SummaryTable</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">table_style</span><span class="p">:</span><span class="w"> </span><span class="l">TableStyleLight1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">header</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">if_exists</span><span class="p">:</span><span class="w"> </span><span class="l">delete</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">sheet</span><span class="p">:</span><span class="w"> </span><span class="l">Details</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">range</span><span class="p">:</span><span class="w"> </span><span class="l">A1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="l">details_query</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">value</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l">total_sales</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">after_sql</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;DETACH DB&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<figure class="code-block" role="figure" aria-label="sql code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- summary_query
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">total_sales</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">total_sales</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="s2">&#34;DB&#34;</span><span class="p">.</span><span class="s2">&#34;Sales&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="s2">&#34;sale_date&#34;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;{YYYY-MM-DD}&#39;</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<figure class="code-block" role="figure" aria-label="sql code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- details_query
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="s2">&#34;DB&#34;</span><span class="p">.</span><span class="s2">&#34;Sales&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="s2">&#34;sale_date&#34;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;{YYYY-MM-DD}&#39;</span><span class="p">;</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<hr>
<h4 id="how-exporting-it-works"><strong>How Exporting It Works</strong></h4>
<ol>
<li>
<p><strong>Parsing the Configuration</strong>:</p>
<ul>
<li>Each export is parsed as a separate section with its metadata stored under the <code>metadata</code> key.</li>
<li>SQL queries or template mappings are defined as child sections.</li>
</ul>
</li>
<li>
<p><strong>File Generation</strong>:</p>
<ul>
<li>The <code>export_sql</code> field specifies a sequence of SQL statements used for the export.</li>
<li>The final <code>COPY</code> statement defines the file format and location.</li>
</ul>
</li>
<li>
<p><strong>Template-Based Exports</strong>:</p>
<ul>
<li>Templates map query results to specific sheets and cells in an existing spreadsheet.</li>
<li>The <code>mapping</code> field defines how query results populate the template:
<ul>
<li><strong><code>sheet</code></strong>: The target sheet in the template.</li>
<li><strong><code>range</code></strong>: The starting cell for the data.</li>
<li><strong><code>sql</code></strong>: The query generating the data.</li>
<li><strong><code>type</code></strong>: Indicates whether the data fills a range (<code>range</code>) or single value (<code>value</code>).</li>
<li><strong><code>table_style</code></strong>: The table style applied to the range.</li>
<li><strong><code>if_exists</code></strong>: Specifies how to handle existing data (e.g., delete or append).</li>
<li><strong><code>header</code></strong>: Whether to include headers in the exported table.</li>
<li><strong><code>clear_range</code></strong>: If true, clears the specified range before populating new data.</li>
<li><strong><code>clear_sheet</code></strong>: If true, clears all content from the specified sheet before populating new data.</li>
<li><strong><code>active</code></strong>: If false, skips this mapping.
the maping can also be a string representing a query and all the mapping can be loaded from a table in the database to simplify the config, and also in a real world it can be extensive, would be easier to be done in a spreadsheet and loaded as a table.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h4 id="resulting-outputs"><strong>Resulting Outputs</strong></h4>
<ol>
<li>
<p><strong>CSV File</strong>:</p>
<ul>
<li>Exports sales data to a CSV file located at <code>/path/to/Reports/YYYYMMDD/sales_YYYYMMDD.csv</code>.</li>
</ul>
</li>
<li>
<p><strong>Excel File</strong>:</p>
<ul>
<li>Exports region data to an Excel file located at <code>/path/to/Reports/YYYYMMDD/regions_YYYYMMDD.xlsx</code>.</li>
</ul>
</li>
<li>
<p><strong>Populated Template</strong>:</p>
<ul>
<li>Generates a sales report from <code>sales_template.xlsx</code> and saves it as <code>sales_report_YYYYMMDD.xlsx</code>.</li>
</ul>
</li>
</ol>
<hr>
<h4 id="benefits-of-this-functionality"><strong>Benefits of this functionality</strong></h4>
<ul>
<li><strong>Flexibility</strong>:
<ul>
<li>Export data in multiple formats (e.g., CSV, Excel) using DuckDB&rsquo;s powerful <code>COPY</code> command.</li>
</ul>
</li>
<li><strong>Reusability</strong>:
<ul>
<li>Use predefined templates to create consistent reports.</li>
</ul>
</li>
<li><strong>Customizability</strong>:
<ul>
<li>SQL queries and mappings allow fine-grained control over the exported data.</li>
</ul>
</li>
</ul>
<p>By leveraging the <code>EXPORTS</code> section, you can automate data export processes, making them efficient and repeatable.</p>
<h4 id="-exporting-as-text-based-template">üìù Exporting as Text-Based Template</h4>
<p>In addition to exporting structured data formats like CSV or Excel, ETLX also supports exporting reports using plain-text templates such as <strong>HTML</strong>, <strong>XML</strong>, <strong>Markdown</strong>, etc.</p>
<p>These templates are rendered using Go‚Äôs <code>text/template</code> engine and can use dynamic data from SQL queries declared under the <code>data_sql</code> field, just like in the <code>NOTIFY</code> section.</p>
<p>This is especially useful for <strong>reporting</strong>, <strong>integration</strong>, or <strong>publishing documents</strong> with dynamic content.</p>
<h5 id="-example">üì¶ Example</h5>
<figure class="code-block" role="figure" aria-label="markdown code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="gu">## TEXT_TMPL
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl">``<span class="sb">`yaml metadata
</span></span></span><span class="line"><span class="cl"><span class="sb">name: TEXT_TMPL
</span></span></span><span class="line"><span class="cl"><span class="sb">description: &#34;Export data to text base template&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">connection: &#34;duckdb:&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">before_sql:
</span></span></span><span class="line"><span class="cl"><span class="sb">  - &#34;INSTALL sqlite&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">  - &#34;LOAD sqlite&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">  - &#34;ATTACH &#39;database/HTTP_EXTRACT.db&#39; AS DB (TYPE SQLITE)&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">data_sql:
</span></span></span><span class="line"><span class="cl"><span class="sb">  - logs
</span></span></span><span class="line"><span class="cl"><span class="sb">  - data
</span></span></span><span class="line"><span class="cl"><span class="sb">after_sql: &#34;DETACH DB&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">tmp_prefix: null
</span></span></span><span class="line"><span class="cl"><span class="sb">text_template: true
</span></span></span><span class="line"><span class="cl"><span class="sb">template: template
</span></span></span><span class="line"><span class="cl"><span class="sb">return_content: false  # if true, returns content instead of writing file
</span></span></span><span class="line"><span class="cl"><span class="sb">path: &#34;nyc_taxy_YYYYMMDD.html&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">active: true
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`sql
</span></span></span><span class="line"><span class="cl"><span class="sb">-- data
</span></span></span><span class="line"><span class="cl"><span class="sb">SELECT *
</span></span></span><span class="line"><span class="cl"><span class="sb">FROM &#34;DB&#34;.&#34;NYC_TAXI&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">WHERE &#34;tpep_pickup_datetime&#34;::DATETIME &lt;= &#39;{YYYY-MM-DD}&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">LIMIT 100
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`sql
</span></span></span><span class="line"><span class="cl"><span class="sb">-- logs
</span></span></span><span class="line"><span class="cl"><span class="sb">SELECT *
</span></span></span><span class="line"><span class="cl"><span class="sb">FROM &#34;DB&#34;.&#34;etlx_logs&#34;
</span></span></span><span class="line"><span class="cl"><span class="sb">--WHERE &#34;ref&#34; = &#39;{YYYY-MM-DD}&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>``html template
</span></span><span class="line"><span class="cl">&lt;style&gt;
</span></span><span class="line"><span class="cl">  table {
</span></span><span class="line"><span class="cl">    border-collapse: collapse;
</span></span><span class="line"><span class="cl">... (truncated for space)</span></span></code></pre></td></tr></table>
</div>
</div></figure>
<a
  class="edit-link"
  href="https://github.com/realdatadriven/etlx/tree/main/docs/public/configuration/exports.md"
  rel="noopener noreferrer"
  target="_blank"
><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20h4L18.5 9.5a2.828 2.828 0 1 0-4-4L4 16zm9.5-13.5l4 4"/></svg>
<span>Improve this page</span>
</a>
</main><aside id="toc" class="toc">
        <div class="toc__header" data-action="toggle-toc">
          <h3 class="toc__title">On this page</h3>

          <button
            class="toc__toggle"
            aria-label="Toggle table of contents"
          ></button>
        </div>

        <div class="toc__content"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#exports">Exports</a></li>
      </ul>
    </li>
    <li><a href="#sales-data-export">Sales Data Export</a></li>
    <li><a href="#region-data-export-to-excel">Region Data Export to Excel</a></li>
    <li><a href="#sales-report-template">Sales Report Template</a>
      <ul>
        <li>
          <ul>
            <li><a href="#how-exporting-it-works"><strong>How Exporting It Works</strong></a></li>
            <li><a href="#resulting-outputs"><strong>Resulting Outputs</strong></a></li>
            <li><a href="#benefits-of-this-functionality"><strong>Benefits of this functionality</strong></a></li>
            <li><a href="#-exporting-as-text-based-template">üìù Exporting as Text-Based Template</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
      </aside><script defer src="/etlx/js/bundle.js"></script></body>
</html>
