<!DOCTYPE html>
<html
  lang="en-US"
  dir="ltr"
><head><script src="/etlx/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=etlx/livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#000000">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="/favicon.ico"><link rel="preload" href="/icons/clipboard.svg" as="image" type="image/svg+xml" />
<link rel="preload" href="/icons/caret-down.svg" as="image" type="image/svg+xml" />
<link rel="preload" href="/icons/caret-right.svg" as="image" type="image/svg+xml" />
<link rel="preload" href="/icons/home.svg" as="image" type="image/svg+xml" />
<title>Validation Rules | ETLX</title>
  <meta name="description" content="The Plume Hugo documentation theme">
  <meta name="keywords" content="Plume, Hugo, documentation, theme">
  <meta name="author" content="Real Data-Driven">
  <meta name="language" content="en-US">

  <link rel="canonical" href="http://localhost:1313/etlx/configuration/validation/">
  <link rel="manifest" href="http://localhost:1313/etlx/manifest.webmanifest"><meta property="og:title" content="Validation Rules | ETLX">
  <meta property="og:description" content="The Plume Hugo documentation theme">
  <meta property="og:type" content="article">
  <meta property="og:url" content="http://localhost:1313/etlx/configuration/validation/">
  <meta property="og:locale" content="en-US">
  <meta property="og:site_name" content="ETLX">
  <meta property="og:image" content="http://localhost:1313/favicon.ico">
  <meta property="og:image:width" content="512">
  <meta property="og:image:height" content="512">
  <meta property="og:image:alt" content="ETLX logo"><meta property="article:author" content="Real Data-Driven"><meta property="article:section" content="configuration"><meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Validation Rules | ETLX">
  <meta name="twitter:description" content="The Plume Hugo documentation theme">
  <meta name="twitter:image" content="http://localhost:1313/favicon.ico">
  <meta name="twitter:image:alt" content="ETLX logo"><script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "TechArticle",
        "@id": "http:\/\/localhost:1313\/etlx\/configuration\/validation\/#article",
        "headline": "Validation Rules",
        "description": "The Plume Hugo documentation theme",
        "url": "http:\/\/localhost:1313\/etlx\/configuration\/validation\/",
        "datePublished": "0001-01-01T00:00:00Z",
        "dateModified": "0001-01-01T00:00:00Z",
        "wordCount":  342 ,
        "timeRequired": "PT2M",
        "author": {
          "@type": "Organization",
          "@id": "http:\/\/localhost:1313\/etlx\/#organization"
        },
        "publisher": {
          "@type": "Organization",
          "@id": "http:\/\/localhost:1313\/etlx\/#organization"
        },
        "isPartOf": {
          "@id": "http:\/\/localhost:1313\/etlx\/#website"
        }
      },{
        "@type": "BreadcrumbList",
        "@id": "http:\/\/localhost:1313\/etlx\/configuration\/validation\/#breadcrumb",
        "itemListElement": [{
              "@type": "ListItem",
              "position":  1 ,
              "name": "Plume Documentation Theme",
              "item": "http:\/\/localhost:1313\/etlx\/"
            },{
              "@type": "ListItem",
              "position":  2 ,
              "name": "Configuration",
              "item": "http:\/\/localhost:1313\/etlx\/configuration\/"
            },{
              "@type": "ListItem",
              "position":  3 ,
              "name": "Validation Rules",
              "item": "http:\/\/localhost:1313\/etlx\/configuration\/validation\/"
            }]
      },{
        "@type": "WebSite",
        "@id": "http:\/\/localhost:1313\/etlx\/#website",
        "url": "http:\/\/localhost:1313\/etlx\/",
        "name": "ETLX",
        "publisher": {
          "@id": "http:\/\/localhost:1313\/etlx\/#organization"
        }
      }
    ]
  }
</script>
<link rel="stylesheet" href="/etlx/css/_reset.css"><link rel="stylesheet" href="/etlx/css/base.css"><link rel="stylesheet" href="/etlx/css/breadcrumbs.css"><link rel="stylesheet" href="/etlx/css/card.css"><link rel="stylesheet" href="/etlx/css/content.css"><link rel="stylesheet" href="/etlx/css/edit-link.css"><link rel="stylesheet" href="/etlx/css/fonts.css"><link rel="stylesheet" href="/etlx/css/footer.css"><link rel="stylesheet" href="/etlx/css/form.css"><link rel="stylesheet" href="/etlx/css/header.css"><link rel="stylesheet" href="/etlx/css/headings.css"><link rel="stylesheet" href="/etlx/css/highlight-copy.css"><link rel="stylesheet" href="/etlx/css/highlight.css"><link rel="stylesheet" href="/etlx/css/page.css"><link rel="stylesheet" href="/etlx/css/search.css"><link rel="stylesheet" href="/etlx/css/sidebar.css"><link rel="stylesheet" href="/etlx/css/skip-link.css"><link rel="stylesheet" href="/etlx/css/table.css"><link rel="stylesheet" href="/etlx/css/toc.css"><link rel="stylesheet" href="/etlx/css/variables.css"></head>
<body
    class="has-toc has-sidebar"
  ><a class="skip-link" href="#main-content">Skip to main content</a>
<header class="header"><button
      class="header__sidebar--toggle"
      data-action="toggle-sidebar"
      title="Toggle sidebar"
    ></button><a class="header__title" href="/">ETLX</a><nav class="menu">
    <ul><li>
      <a href="/etlx/">Home</a></li><li>
      <a href="/etlx/docs/">Documentation</a></li><li>
      <a href="/etlx/introduction/">Introduction</a></li><li>
      <a href="/etlx/quick-start/">Quick Start</a></li><li>
      <a href="/etlx/configuration/">Configuration</a></li><li>
      <a href="/etlx/advanced/">Advanced</a></li><li>
      <a href="/etlx/embedding/">Embedding</a></li><li>
      <a href="/etlx/future/">Future</a></li><li>
      <a href="/etlx/license/">License</a></li></ul>
  </nav><button
    class="header__menu--toggle"
    data-action="toggle-menu"
    title="Toggle menu"
  ></button>
</header>
<div class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList"><a
          class="crumb home"
          href="http://localhost:1313/etlx/"
          title="Plume Documentation Theme"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        ><meta itemprop="item" content="http://localhost:1313/etlx/"><span itemprop="name">Plume Documentation Theme</span><meta itemprop="position" content="1"></a><a
          class="crumb"
          href="http://localhost:1313/etlx/configuration/"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        ><meta itemprop="item" content="http://localhost:1313/etlx/configuration/"><span itemprop="name">Configuration</span><meta itemprop="position" content="2"></a><span
          class="crumb current"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        ><meta itemprop="item" content="http://localhost:1313/etlx/configuration/validation/"><span itemprop="name">Validation Rules</span><meta itemprop="position" content="3"></span></div><aside class="sidebar">
    <div class="sidebar__content">
      <button
        class="sidebar__close"
        data-action="toggle-sidebar"
        title="Close sidebar"
      ></button>

      <div class="sidebar__section--search">
        <input
          name="q"
          placeholder="Search..."
          type="search"
        />
        <ul class="sidebar__section--search-results"></ul>
      </div>

      <nav class="sidebar__nav">
        <ul class="sidebar__section--pages"><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/etl/"
      >ETL</a>
    </li><li>
      <a
        class="sidebar__link is-active"
        href="http://localhost:1313/etlx/configuration/validation/"
      >Validation Rules</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/query-doc/"
      >Query Documentation</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/data-quality/"
      >Data Quality</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/exports/"
      >Exports</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/scripts/"
      >Scripts</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/multi-queries/"
      >Multi-Queries</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/logs/"
      >Logs</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/requires/"
      >Loading Config Dependencies</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/actions/"
      >Actions</a>
    </li><li>
      <a
        class="sidebar__link"
        href="http://localhost:1313/etlx/configuration/notify/"
      >Notify</a>
    </li></ul>
      </nav>
    </div><footer class="footer">
    <div class="footer__social-links"><a href="https://github.com/realdatadriven/etlx" target="_blank" rel="noopener noreferrer"><div title="GitHub">
              <div aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M5.315 2.1c.791-.113 1.9.145 3.333.966l.272.161l.16.1l.397-.083a13.3 13.3 0 0 1 4.59-.08l.456.08l.396.083l.161-.1c1.385-.84 2.487-1.17 3.322-1.148l.164.008l.147.017l.076.014l.05.011l.144.047a1 1 0 0 1 .53.514a5.2 5.2 0 0 1 .397 2.91l-.047.267l-.046.196l.123.163c.574.795.93 1.728 1.03 2.707l.023.295L21 9.5c0 3.855-1.659 5.883-4.644 6.68l-.245.061l-.132.029l.014.161l.008.157l.004.365l-.002.213L16 21a1 1 0 0 1-.883.993L15 22H9a1 1 0 0 1-.993-.883L8 21v-.734c-1.818.26-3.03-.424-4.11-1.878l-.535-.766c-.28-.396-.455-.579-.589-.644l-.048-.019a1 1 0 0 1 .564-1.918c.642.188 1.074.568 1.57 1.239l.538.769c.76 1.079 1.36 1.459 2.609 1.191L8 17.562l-.018-.168a5 5 0 0 1-.021-.824l.017-.185l.019-.12l-.108-.024c-2.976-.71-4.703-2.573-4.875-6.139l-.01-.31L3 9.5a5.6 5.6 0 0 1 .908-3.051l.152-.222l.122-.163l-.045-.196a5.2 5.2 0 0 1 .145-2.642l.1-.282l.106-.253a1 1 0 0 1 .529-.514l.144-.047z"/></svg>
</div>
            </div></a></div>
  </footer></aside>

  <div class="sidebar__backdrop" data-action="toggle-sidebar"></div><main id="main-content"><h1>Validation Rules</h1><h3 id="validation-rules">Validation Rules</h3>
<ul>
<li>Validate data quality during the ETL process by using the key <code>[step]_validation</code> in the metadata section.</li>
<li>Example:</li>
</ul>
<figure class="code-block" role="figure" aria-label="yaml code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">load_validation</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">throw_if_empty</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="l">validate_data_not_empty</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;No data extracted for the given date!&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">throw_if_not_empty</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">sql</span><span class="p">:</span><span class="w"> </span><span class="l">validate_data_duplicates</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Duplicate data detected!&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">...</span></span></span></code></pre></td></tr></table>
</div>
</div></figure>
<p>For every object in the <code>[step]_validation</code> the <code>sql</code> is executed in the <code>[step]_con</code> connection, and it can either throw error message defined in <code>msg</code> or not if the condition (<code>type:throw_if_empty | type:throw_if_not_empty</code> or) is met or not.</p>
<h4 id="extracting-data-from-unsupported-databases"><strong>Extracting Data from Unsupported Databases</strong></h4>
<p>If the database you are using does not have a direct DuckDB scanner, but it is supported by <strong>sqlx</strong> or it has <code>odbc</code> support, you must set the <code>to_csv</code> option to <code>true</code> in the <code>extract</code> configuration. This ensures that data is first exported to a CSV file and then on step <code>load</code> the file can be processed by DuckDB.</p>
<h5 id="example-configuration"><strong>Example Configuration:</strong></h5>
<figure class="code-block" role="figure" aria-label="markdown code snippet">
  <button class="highlight__copy" title="Copy to clipboard"></button><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="gu">## table_from_odbc_source
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl">``<span class="sb">`yaml metadata
</span></span></span><span class="line"><span class="cl"><span class="sb">name: table_from_odbc_source
</span></span></span><span class="line"><span class="cl"><span class="sb">description: &#39;This is an example o how to extract from databases that does not have a DuckDB scanner&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">to_csv: true
</span></span></span><span class="line"><span class="cl"><span class="sb">extract_conn: &#39;odbc:DRIVER={ODBC Driver 17 for SQL Server};SERVER=@MSSQL_HOST;UID=@MSSQL_USER;PWD=@MSSQL_PASS;DATABASE=DB&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">extract_sql: |
</span></span></span><span class="line"><span class="cl"><span class="sb">  SELECT [fields]
</span></span></span><span class="line"><span class="cl"><span class="sb">  FROM [table]
</span></span></span><span class="line"><span class="cl"><span class="sb">  WHERE [condition]
</span></span></span><span class="line"><span class="cl"><span class="sb">load_conn: &#39;duckdb:&#39;
</span></span></span><span class="line"><span class="cl"><span class="sb">load_before_sql:
</span></span></span><span class="line"><span class="cl"><span class="sb">  - load_extentions
</span></span></span><span class="line"><span class="cl"><span class="sb">  - conn
</span></span></span><span class="line"><span class="cl"><span class="sb">load_sql: load_exported_csv
</span></span></span><span class="line"><span class="cl"><span class="sb">load_after_sql: detaches
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">...
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">Once extracted, the CSV file can be loaded by DuckDB using:
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`sql load_exported_csv
</span></span></span><span class="line"><span class="cl"><span class="sb">CREATE OR REPLACE TABLE DB.target_table AS  
</span></span></span><span class="line"><span class="cl"><span class="sb">SELECT * FROM READ_CSV(&#39;&lt;fname&gt;&#39;, HEADER TRUE);  
</span></span></span><span class="line"><span class="cl"><span class="sb">`</span>`<span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">
</span></span></span><span class="line"><span class="cl"><span class="sb">##### **Why Use `</span>to_csv: true`?**
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Workaround for unsupported databases**: If DuckDB does not have a direct scanner, exporting data to CSV allows and then the CSV can be loaded by the DuckDB.
</span></span><span class="line"><span class="cl"><span class="k">-</span> **Ensures compatibility**: ETLX will handle the conversion, making the data accessible for further transformation and loading.
</span></span><span class="line"><span class="cl">- <span class="gs">**Required for smooth ETL workflows**</span>: Without this option, DuckDB may fail to recognize or query the database directly.</span></span></code></pre></td></tr></table>
</div>
</div></figure>
<a
  class="edit-link"
  href="https://github.com/realdatadriven/etlx/tree/main/docs/public/configuration/validation.md"
  rel="noopener noreferrer"
  target="_blank"
><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20h4L18.5 9.5a2.828 2.828 0 1 0-4-4L4 16zm9.5-13.5l4 4"/></svg>
<span>Improve this page</span>
</a>
</main><aside id="toc" class="toc">
        <div class="toc__header" data-action="toggle-toc">
          <h3 class="toc__title">On this page</h3>

          <button
            class="toc__toggle"
            aria-label="Toggle table of contents"
          ></button>
        </div>

        <div class="toc__content"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#validation-rules">Validation Rules</a>
          <ul>
            <li><a href="#extracting-data-from-unsupported-databases"><strong>Extracting Data from Unsupported Databases</strong></a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
      </aside><script defer src="/etlx/js/bundle.js"></script></body>
</html>
