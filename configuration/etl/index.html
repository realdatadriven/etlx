<!doctype html><html lang=en-US dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content><link rel=icon href=/favicon.ico sizes=any><link rel=apple-touch-icon href=/favicon.ico><link rel=preload href=/icons/clipboard.svg as=image type=image/svg+xml><link rel=preload href=/icons/caret-down.svg as=image type=image/svg+xml><link rel=preload href=/icons/caret-right.svg as=image type=image/svg+xml><link rel=preload href=/icons/home.svg as=image type=image/svg+xml><title>ETL | ETLX</title><meta name=description content="ETL / ELT Framework powered by DuckDB, designed to seamlessly integrate and process data from diverse sources. It leverages Markdown as a configuration medium, where YAML blocks define metadata for each data source, and embedded SQL blocks specify the extraction, transformation, and loading logic."><meta name=keywords content="ETL,ELT,Data Integration,DuckDB,Markdown,SQL,Data Processing,Framework,Data Engineering,Data Pipelines,Data Transformation,Data Science,Data Analytics,Open Source,Data Governance,Data Documentation,Data Workflows,Data Workflow Documentation,Report Automation"><meta name=author content="Real Data-Driven"><meta name=language content="en-US"><link rel=canonical href=https://realdatadriven.github.io/etlx/configuration/etl/><link rel=manifest href=https://realdatadriven.github.io/etlx/manifest.webmanifest><meta property="og:title" content="ETL | ETLX"><meta property="og:description" content="ETL / ELT Framework powered by DuckDB, designed to seamlessly integrate and process data from diverse sources. It leverages Markdown as a configuration medium, where YAML blocks define metadata for each data source, and embedded SQL blocks specify the extraction, transformation, and loading logic."><meta property="og:type" content="article"><meta property="og:url" content="https://realdatadriven.github.io/etlx/configuration/etl/"><meta property="og:locale" content="en-US"><meta property="og:site_name" content="ETLX"><meta property="og:image" content="https://realdatadriven.github.io/favicon.ico"><meta property="og:image:width" content="512"><meta property="og:image:height" content="512"><meta property="og:image:alt" content="ETLX logo"><meta property="article:author" content="Real Data-Driven"><meta property="article:section" content="configuration"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="ETL | ETLX"><meta name=twitter:description content="ETL / ELT Framework powered by DuckDB, designed to seamlessly integrate and process data from diverse sources. It leverages Markdown as a configuration medium, where YAML blocks define metadata for each data source, and embedded SQL blocks specify the extraction, transformation, and loading logic."><meta name=twitter:image content="https://realdatadriven.github.io/favicon.ico"><meta name=twitter:image:alt content="ETLX logo"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"TechArticle","@id":"https:\/\/realdatadriven.github.io\/etlx\/configuration\/etl\/#article","headline":"ETL","description":"ETL \/ ELT Framework powered by DuckDB, designed to seamlessly integrate and process data from diverse sources. It leverages Markdown as a configuration medium, where YAML blocks define metadata for each data source, and embedded SQL blocks specify the extraction, transformation, and loading logic.","url":"https:\/\/realdatadriven.github.io\/etlx\/configuration\/etl\/","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","wordCount":478,"timeRequired":"PT3M","author":{"@type":"Organization","@id":"https:\/\/realdatadriven.github.io\/etlx\/#organization"},"publisher":{"@type":"Organization","@id":"https:\/\/realdatadriven.github.io\/etlx\/#organization"},"isPartOf":{"@id":"https:\/\/realdatadriven.github.io\/etlx\/#website"}},{"@type":"BreadcrumbList","@id":"https:\/\/realdatadriven.github.io\/etlx\/configuration\/etl\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"ETLX","item":"https:\/\/realdatadriven.github.io\/etlx\/"},{"@type":"ListItem","position":2,"name":"Configuration","item":"https:\/\/realdatadriven.github.io\/etlx\/configuration\/"},{"@type":"ListItem","position":3,"name":"ETL","item":"https:\/\/realdatadriven.github.io\/etlx\/configuration\/etl\/"}]},{"@type":"WebSite","@id":"https:\/\/realdatadriven.github.io\/etlx\/#website","url":"https:\/\/realdatadriven.github.io\/etlx\/","name":"ETLX","publisher":{"@id":"https:\/\/realdatadriven.github.io\/etlx\/#organization"}}]}</script><link rel=stylesheet href=/etlx/css/style.min.c8b8d34bfceb040e8957f73bca811dcf496446066a07c4298993517af10bc79e.css integrity="sha256-yLjTS/zrBA6JV/c7yoEdz0lkRgZqB8QpiZNRevELx54=" crossorigin=anonymous></head><body class="has-toc has-sidebar"><a class=skip-link href=#main-content>Skip to main content</a><header class=header><button class=header__sidebar--toggle data-action=toggle-sidebar title="Toggle sidebar"></button><a class=header__title href=/>ETLX</a><nav class=menu><ul><li><a href=/etlx/>Home</a></li><li><a href=/etlx/introduction/>Introduction</a></li><li><a href=/etlx/quick-start/>Quick Start</a></li><li><a href=/etlx/configuration/>Configuration</a></li><li><a href=/etlx/advanced/>Advanced</a></li><li><a href=/etlx/embedding/>Embedding</a></li><li><a href=/etlx/future/>Future</a></li><li><a href=/etlx/license/>License</a></li></ul></nav><button class=header__menu--toggle data-action=toggle-menu title="Toggle menu"></button></header><div class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><a class="crumb home" href=https://realdatadriven.github.io/etlx/ title=ETLX itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><meta itemprop=item content="https://realdatadriven.github.io/etlx/"><span itemprop=name>ETLX</span><meta itemprop=position content="1"></a><a class=crumb href=https://realdatadriven.github.io/etlx/configuration/ itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><meta itemprop=item content="https://realdatadriven.github.io/etlx/configuration/"><span itemprop=name>Configuration</span><meta itemprop=position content="2"></a><span class="crumb current" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><meta itemprop=item content="https://realdatadriven.github.io/etlx/configuration/etl/"><span itemprop=name>ETL</span><meta itemprop=position content="3"></span></div><aside class=sidebar><div class=sidebar__content><button class=sidebar__close data-action=toggle-sidebar title="Close sidebar"></button><div class=sidebar__section--search><input name=q placeholder=Search... type=search><ul class=sidebar__section--search-results></ul></div><nav class=sidebar__nav><ul class=sidebar__section--pages><li><a class="sidebar__link is-active" href=https://realdatadriven.github.io/etlx/configuration/etl/>ETL</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/validation/>Validation Rules</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/query-doc/>Query Documentation</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/data-quality/>Data Quality</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/exports/>Exports</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/scripts/>Scripts</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/multi-queries/>Multi-Queries</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/logs/>Logs</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/requires/>Loading Config Dependencies</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/actions/>Actions</a></li><li><a class=sidebar__link href=https://realdatadriven.github.io/etlx/configuration/notify/>Notify</a></li></ul></nav></div><footer class=footer><div class=footer__social-links><a href=https://github.com/realdatadriven/etlx target=_blank rel="noopener noreferrer"><div title=GitHub><div aria-hidden=true><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M5.315 2.1c.791-.113 1.9.145 3.333.966l.272.161.16.1.397-.083a13.3 13.3.0 014.59-.08l.456.08.396.083.161-.1c1.385-.84 2.487-1.17 3.322-1.148l.164.008.147.017.076.014.05.011.144.047a1 1 0 01.53.514 5.2 5.2.0 01.397 2.91l-.047.267-.046.196.123.163c.574.795.93 1.728 1.03 2.707l.023.295L21 9.5c0 3.855-1.659 5.883-4.644 6.68l-.245.061-.132.029.014.161.008.157.004.365-.002.213L16 21a1 1 0 01-.883.993L15 22H9a1 1 0 01-.993-.883L8 21v-.734c-1.818.26-3.03-.424-4.11-1.878l-.535-.766c-.28-.396-.455-.579-.589-.644l-.048-.019a1 1 0 01.564-1.918c.642.188 1.074.568 1.57 1.239l.538.769c.76 1.079 1.36 1.459 2.609 1.191L8 17.562l-.018-.168a5 5 0 01-.021-.824l.017-.185.019-.12-.108-.024c-2.976-.71-4.703-2.573-4.875-6.139l-.01-.31L3 9.5a5.6 5.6.0 01.908-3.051l.152-.222.122-.163-.045-.196a5.2 5.2.0 01.145-2.642l.1-.282.106-.253a1 1 0 01.529-.514l.144-.047z"/></svg></div></div></a></div></footer></aside><div class=sidebar__backdrop data-action=toggle-sidebar></div><main id=main-content><h1>ETL</h1><h1 id=etl>ETL</h1><ul><li>Defines the overall ETL process.</li><li>Example:</li></ul><figure class=code-block role=figure aria-label="markdown code snippet"><button class=highlight__copy title="Copy to clipboard"></button><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl><span class=gh># ETL
</span></span></span><span class=line><span class=cl>``<span class=sb>`yaml metadata
</span></span></span><span class=line><span class=cl><span class=sb>name: Daily_ETL
</span></span></span><span class=line><span class=cl><span class=sb>description: &#39;Daily extraction at 5 AM&#39;
</span></span></span><span class=line><span class=cl><span class=sb>database: analytics_db
</span></span></span><span class=line><span class=cl><span class=sb>connection: &#39;postgres:user=@PGUSER password=@PGPASSWORD dbname=analytics_db host=localhost port=5432 sslmode=disable&#39;
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>## sales_data
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`yaml metadata
</span></span></span><span class=line><span class=cl><span class=sb>name: SalesData
</span></span></span><span class=line><span class=cl><span class=sb>description: &#39;Daily Sales Data&#39;
</span></span></span><span class=line><span class=cl><span class=sb>load_conn: &#39;duckdb:&#39;
</span></span></span><span class=line><span class=cl><span class=sb>load_before_sql:
</span></span></span><span class=line><span class=cl><span class=sb>  - load_extentions
</span></span></span><span class=line><span class=cl><span class=sb>  - conn
</span></span></span><span class=line><span class=cl><span class=sb>load_validation: # Validation is performed during the load phase using YAML
</span></span></span><span class=line><span class=cl><span class=sb>  - type: throw_if_empty
</span></span></span><span class=line><span class=cl><span class=sb>    sql: validate_data_not_empty
</span></span></span><span class=line><span class=cl><span class=sb>    msg: &#39;No data extracted for the given date!&#39;
</span></span></span><span class=line><span class=cl><span class=sb>  - type: throw_if_not_empty
</span></span></span><span class=line><span class=cl><span class=sb>    sql: validate_data_duplicates
</span></span></span><span class=line><span class=cl><span class=sb>    msg: &#39;Duplicate data detected!&#39;
</span></span></span><span class=line><span class=cl><span class=sb>load_sql: load_sales
</span></span></span><span class=line><span class=cl><span class=sb>load_after_sql: detaches
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`sql 
</span></span></span><span class=line><span class=cl><span class=sb>-- load_extentions
</span></span></span><span class=line><span class=cl><span class=sb>load mysql;
</span></span></span><span class=line><span class=cl><span class=sb>load postgres;
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`sql 
</span></span></span><span class=line><span class=cl><span class=sb>-- conn
</span></span></span><span class=line><span class=cl><span class=sb>ATTACH &#39;user=@MYSQL_USER password=A@MYSQL_PASSWORD port=3306 database=sales&#39; AS &#34;ORG&#34; (TYPE MYSQL);
</span></span></span><span class=line><span class=cl><span class=sb>ATTACH &#39;ser=@PGUSER password=@PGPASSWORD dbname=analytics_db host=localhost port=5432 sslmode=disable&#39; AS &#34;DST&#34; (TYPE POSTGRES);
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`sql 
</span></span></span><span class=line><span class=cl><span class=sb>-- detaches
</span></span></span><span class=line><span class=cl><span class=sb>DETACH &#34;ORG&#34;;
</span></span></span><span class=line><span class=cl><span class=sb>DETACH &#34;DST&#34;;
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`sql load_sales
</span></span></span><span class=line><span class=cl><span class=sb>CREATE OR REPLACE TABLE &#34;DST&#34;.&#34;analytics_db&#34; AS 
</span></span></span><span class=line><span class=cl><span class=sb>SELECT * 
</span></span></span><span class=line><span class=cl><span class=sb>FROM &#34;ORG&#34;.&#34;sales&#34;;
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`sql 
</span></span></span><span class=line><span class=cl><span class=sb>-- validate_data_not_empty
</span></span></span><span class=line><span class=cl><span class=sb>SELECT * 
</span></span></span><span class=line><span class=cl><span class=sb>FROM &#34;ORG&#34;.&#34;sales&#34;
</span></span></span><span class=line><span class=cl><span class=sb>WHERE &#34;date&#34; = &#39;{YYYY-MM-DD}&#39;
</span></span></span><span class=line><span class=cl><span class=sb>LIMIT 10;
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>`</span>`<span class=sb>`sql 
</span></span></span><span class=line><span class=cl><span class=sb>-- throw_if_not_empty
</span></span></span><span class=line><span class=cl><span class=sb>SELECT * 
</span></span></span><span class=line><span class=cl><span class=sb>FROM &#34;DST&#34;.&#34;analytics_db&#34;
</span></span></span><span class=line><span class=cl><span class=sb>WHERE &#34;date&#34; = &#39;{YYYY-MM-DD}&#39;
</span></span></span><span class=line><span class=cl><span class=sb>LIMIT 10;
</span></span></span><span class=line><span class=cl><span class=sb>`</span>``
</span></span><span class=line><span class=cl>...</span></span></code></pre></td></tr></table></div></div></figure><h2 id=1-etl-process-starts>1. <strong>ETL Process Starts</strong></h2><ul><li>Begin with the &ldquo;ETL&rdquo; key;</li><li>Extract metadata, specifically:<ul><li>&ldquo;connection&rdquo;: Main connection to the destination database.</li><li>&ldquo;description&rdquo;: For logging the start and end time of the ETL process.</li></ul></li></ul><h2 id=2-loop-through-level-2-key-in-under>2. <strong>Loop through Level 2 key in under &ldquo;ETL&rdquo; key</strong></h2><ul><li>Iterate over each key (e.g., &ldquo;sales_data&rdquo;)</li><li>For each key, access its &ldquo;metadata&rdquo; to process the ETL steps.</li></ul><h2 id=3-etl-steps>3. <strong>ETL Steps</strong></h2><ul><li>Each ETL step (<code>extract</code>, <code>transform</code>, <code>load</code>) has:<ul><li><code>_before_sql</code>: Queries to run first (setup).</li><li><code>_sql</code>: The main query or queries to run.</li><li><code>_after_sql</code>: Cleanup queries to run afterward.</li></ul></li><li>Queries can be:<ul><li><code>null</code>: Do nothing.</li><li><code>string</code>: Reference a single query key in the same map or the query itself.</li><li><code>array|list</code>: Execute all queries in sequence.</li><li>In case is not null it can be the query itself or just the name of a sql code block under the same key, where <code>sql [query_name]</code> or first line <code>-- [query_name]</code></li></ul></li><li>Use <code>_conn</code> for connection settings. If <code>null</code>, fall back to the main connection.</li><li>Additionally, error handling can be defined using <code>[step]_on_err_match_patt</code> and <code>[step]_on_err_match_sql</code> to handle specific database errors dynamically, where <code>[step]_on_err_match_patt</code> is the <code>regexp</code> patthern to match error,and if maches the <code>[step]_on_err_match_sql</code> is executed, the same can be applied for <code>[step]_before_on_err_match_patt</code> and <code>[step]_before_on_err_match_sql</code>.
You can define patterns to match specific errors and provide SQL statements to resolve those errors. This feature is useful when working with dynamically created databases, tables, or schemas.</li></ul><h2 id=4-output-logsn>4. <strong>Output Logs</strong>n</h2><ul><li>Log progress (e.g., connection usage, start/end times, descriptions).</li><li>Gracefully handle missing or <code>null</code> keys.</li></ul><a class=edit-link href=https://github.com/realdatadriven/etlx/tree/main/docs/content/configuration/etl.md rel="noopener noreferrer" target=_blank><svg width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20h4L18.5 9.5a2.828 2.828.0 10-4-4L4 16zm9.5-13.5 4 4"/></svg>
<span>Improve this page</span></a></main><aside id=toc class=toc><div class=toc__header data-action=toggle-toc><h3 class=toc__title>On this page</h3><button class=toc__toggle aria-label="Toggle table of contents"></button></div><div class=toc__content><nav id=TableOfContents><ul><li><a href=#1-etl-process-starts>1. <strong>ETL Process Starts</strong></a></li><li><a href=#2-loop-through-level-2-key-in-under>2. <strong>Loop through Level 2 key in under “ETL” key</strong></a></li><li><a href=#3-etl-steps>3. <strong>ETL Steps</strong></a></li><li><a href=#4-output-logsn>4. <strong>Output Logs</strong>n</a></li></ul></nav></div></aside><script defer crossorigin=anonymous integrity="sha256-KXMijDfasiR2erJ0tgywvcZ1CHvBNdFv6ZTL8PGWBIE=" src=/etlx/js/bundle.2973228c37dab224767ab274b60cb0bdc675087bc135d16fe994cbf0f1960481.js></script></body></html>